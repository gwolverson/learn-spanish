import{S as C,i as D,s as I,e as N,b as y,T as S,h as p,$ as P,k,a as q,q as w,l as g,m as R,c as O,r as E,n as b,F as h,G as U}from"./index.df899dc9.js";import{_ as V}from"./preload-helper.41c905a7.js";import{w as T}from"./singletons.1e3141a6.js";function j(o={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:l,onRegistered:s,onRegisteredSW:i,onRegisterError:c}=o;let r,u,_;const v=async(d=!0)=>{await u,await(_==null?void 0:_())};async function a(){if("serviceWorker"in navigator){const{Workbox:d}=await V(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[],import.meta.url);r=new d("./sw.js",{scope:"./",type:"classic"}),_=async()=>{await(r==null?void 0:r.messageSkipWaiting())};{let n=!1;const f=()=>{n=!0,r==null||r.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),t==null||t()};r.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?f():!n&&(l==null||l()):m.isExternal?window.location.reload():!n&&(l==null||l()):m.isUpdate||l==null||l()}),r.addEventListener("waiting",f),r.addEventListener("externalwaiting",f)}r.register({immediate:e}).then(n=>{i?i("./sw.js",n):s==null||s(n)}).catch(n=>{c==null||c(n)})}}return u=a(),v}function B(o={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:l,onRegistered:s,onRegisteredSW:i,onRegisterError:c}=o,r=T(!1),u=T(!1),_=j({immediate:e,onOfflineReady(){u.set(!0),l==null||l()},onNeedRefresh(){r.set(!0),t==null||t()},onRegistered:s,onRegisteredSW:i,onRegisterError:c});return{needRefresh:r,offlineReady:u,updateServiceWorker:_}}function A(o){let e,t,l,s,i,c,r,u;function _(n,f){return n[1]?G:F}let v=_(o),a=v(o),d=o[0]&&L(o);return{c(){e=k("div"),t=k("div"),a.c(),l=q(),d&&d.c(),s=q(),i=k("button"),c=w("Close"),this.h()},l(n){e=g(n,"DIV",{class:!0,role:!0});var f=R(e);t=g(f,"DIV",{class:!0});var m=R(t);a.l(m),m.forEach(p),l=O(f),d&&d.l(f),s=O(f),i=g(f,"BUTTON",{class:!0});var W=R(i);c=E(W,"Close"),W.forEach(p),f.forEach(p),this.h()},h(){b(t,"class","message svelte-16kqdmp"),b(i,"class","svelte-16kqdmp"),b(e,"class","pwa-toast svelte-16kqdmp"),b(e,"role","alert")},m(n,f){y(n,e,f),h(e,t),a.m(t,null),h(e,l),d&&d.m(e,null),h(e,s),h(e,i),h(i,c),r||(u=U(i,"click",o[6]),r=!0)},p(n,f){v!==(v=_(n))&&(a.d(1),a=v(n),a&&(a.c(),a.m(t,null))),n[0]?d?d.p(n,f):(d=L(n),d.c(),d.m(e,s)):d&&(d.d(1),d=null)},d(n){n&&p(e),a.d(),d&&d.d(),r=!1,u()}}}function F(o){let e,t;return{c(){e=k("span"),t=w("New content available, click on reload button to update.")},l(l){e=g(l,"SPAN",{});var s=R(e);t=E(s,"New content available, click on reload button to update."),s.forEach(p)},m(l,s){y(l,e,s),h(e,t)},d(l){l&&p(e)}}}function G(o){let e,t;return{c(){e=k("span"),t=w("App ready to work offline")},l(l){e=g(l,"SPAN",{});var s=R(e);t=E(s,"App ready to work offline"),s.forEach(p)},m(l,s){y(l,e,s),h(e,t)},d(l){l&&p(e)}}}function L(o){let e,t,l,s;return{c(){e=k("button"),t=w("Reload"),this.h()},l(i){e=g(i,"BUTTON",{class:!0});var c=R(e);t=E(c,"Reload"),c.forEach(p),this.h()},h(){b(e,"class","svelte-16kqdmp")},m(i,c){y(i,e,c),h(e,t),l||(s=U(e,"click",o[7]),l=!0)},p:S,d(i){i&&p(e),l=!1,s()}}}function M(o){let e,t=o[2]&&A(o);return{c(){t&&t.c(),e=N()},l(l){t&&t.l(l),e=N()},m(l,s){t&&t.m(l,s),y(l,e,s)},p(l,[s]){l[2]?t?t.p(l,s):(t=A(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(l){t&&t.d(l),l&&p(e)}}}function x(o,e,t){let l,s,i;const{needRefresh:c,updateServiceWorker:r,offlineReady:u}=B({onRegistered(a){console.log(`SW Registered: ${a}`)},onRegisterError(a){console.log("SW registration error",a)}});P(o,c,a=>t(0,s=a)),P(o,u,a=>t(1,i=a));const _=()=>{u.set(!1),c.set(!1)},v=()=>r(!0);return o.$$.update=()=>{o.$$.dirty&3&&t(2,l=i||s)},[s,i,l,c,r,u,_,v]}class K extends C{constructor(e){super(),D(this,e,x,M,I,{})}}export{K as default};
